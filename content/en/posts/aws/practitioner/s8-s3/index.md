---
title: "AWS-CCP Section8: S3-Simple Storage Service"
date: 2024-07-29T23:37:19+02:00
# slug: 2024-07-29-s8-s3
type: posts
draft: true
categories: ["AWS"]
tags: ["AWS", "S3", "Storage"]
---

## Introduction

S3 is a killer service of AWS. It is a object storage service that offers industry-leading scalability, data availability, security, and performance. This article will introduce the basic concepts of S3. The S3 means Simple Storage Service.

## Use Cases

- Backup and restore
- Disaster recovery
- Website backbones
- Data lakes and big data analytics
- Static website hosting
  - Bucket has an option to host a static website

## Basic Concepts

### Bucket(Directory)

- A container for objects stored in S3
- Globally unique name across all AWS accounts and regions
- Defined in region level
- Has naming conventions
- Can create folder in bucket, but it is not a bucket

### Object(File)

- Indexed by key, which is a full path
- Key = Prefix + Object Name, e.g. `folder1/folder2/object`
- Max size: 5TB
  - For larger files, use multi-part upload
- Tags
- Versioning
- Access Key
  - Not included in the URL
  - Which is used to sign programmatic requests through AWS CLI and API

## Security

```Policy = User-based || Resource-based```

- User-based
  - IAM Policies
- Resource-based
  - Bucket Policies
    - Generated by policy generator
    - `Effect + Principal + Action + Resource = Statement`
  - Object Access Control List
  - Bucket Access Control List

AWS provides an extra layer of policy to prevent data leakage when the policy is not set correctly.

## Versioning

- Rollback to previous version
- Set in the **property** of the bucket
- `NULL` is the mark for the version before versioning is enabled

### Permanent Deletion

- Used for rollback

### Normal Deletion

- Create a delete marker
- Mask the object, but can be restored in the future

## Replication

- Asynchronous copy
- Support different regions/accounts
- IAM permission required
- Versioning required

Handled by **replication rules**, the versioning ID is synchronized between the source and destination.

By default, S3 only replicates the object created after the replication rule is set. We can use batch replication to replicate the existing objects.

The global unique name simplifies the replication process.

### CRR(Cross-Region Replication)

- Lower latency for global users
- Compliance requirements

### SRR(Same-Region Replication)

- Log aggregation
- Switch between dev and prod

## Storage Classes

- Concept
  - Minimum storage duration charge: the files deleted before the minimum duration will still be charged
  - Retrieval fee: the fee for retrieving the data
  - Storage fee: the fee for storing the data
  - Retrieval time: the time for retrieving the data

- Category
  - General Purpose
  - IA (Infrequent Access): Used for backup, disaster recovery, etc
  - Glacier Storage: Used for archive, etc. Retrieval time is longer
  - Intelligent Tiering: Auto-tiering fee

- Bucket lifecycle
  - Allow the bucket to switch between different storage classes in different stages

## Encryption

- Server side encryption(SSE) is always on
- Client side encryption: which means has been encrypted before uploading to S3

## IAM Access Analyzer

- A monitoring way to check the bucket policy

## Snow Family

Edge computing/storage service.

`1 EB = 1,000 PB = 1,000,000 TB = 1,000,000,000 GB`

- Migration: A physical device to transfer data
  - Snowcone
    - `< 8 TB`
  - Snowball Edge
    - `< PB`
  - Snowmobile
    - `> 10 PB && < 100 PB`

- Edge Computing: A physical device to run compute, not required to connect to the internet/cloud, for pre-processing data, machine learning, mining stations, ship on the sea, etc.
  - Snowcone
  - Snowball Edge
- Has computation optimized version: for machine learning, etc.
- Can run EC2 and Lambda functions

- Support OpsHub: a GUI to manage the device
- Free to put data into the device, but charge for data out

## Storage Gateway

**On-premises** means the data is stored in the local data center.

- For hybrid cloud (Mix S3, Glacier, AWS EBS, etc.)
- Mainly used for backup and disaster recovery
